!function(t,o){"object"==typeof exports?module.exports=o():"function"==typeof define&&define.amd?define(o):t.Zoom=o()}(this,function(){function t(o,s){var e,i=this;return o?this instanceof t?(this.options=s||{},this.options.maxZoom=this.options.maxZoom||2,this.options.minZoom=this.options.minZoom||1,this.zoomViewer="string"==typeof o?document.querySelector(o):o,this.zoomBody=this.zoomViewer.children[0],e=this.zoomViewer.getBoundingClientRect(),this.viewerOffsets={},this.viewerOffsets.top=e.top,this.viewerOffsets.left=e.left,this.addStyles(),this.touchStart=function(t){t.stopPropagation(),i._touchZoomStart(t)},this.touchZoomMove=function(t){i._touchZoom(t)},this.touchZoomEnd=function(t){i._touchZoomEnd(t)},this.mouseZoomMove=function(t){i._mouseZoom(t)},this.mouseZoomEnd=function(t){i._mouseZoomEnd(t)},this.mouseMove=function(t){i._mouseMove(t)},this.zoomViewer.addEventListener("touchstart",this.touchStart,!1),this.options.withMouse&&(this.mouseDown=function(t){t.stopPropagation(),i._mouseZoomStart(t)},this.zoomViewer.addEventListener("mousedown",this.mouseDown,!1)),void(this.scale=1)):new t(o,s):(console.log("Parameter zoomViewer is required"),{})}return t.prototype={_mouseEvent:{mousewheel:"mouseZoomMove",DOMMouseScroll:"mouseZoomMove",mouseup:"mouseZoomEnd"},_touchEvent:{touchmove:"touchZoomMove",touchend:"touchZoomEnd",touchcancel:"touchZoomEnd"},addStyles:function(){this.zoomBody.style.transform="scale(1) translateZ(0)",this.zoomBody.style["-webkit-transform"]="scale(1) translateZ(0)",this.zoomBody.style["-webkit-transform-origin"]="0px 0px",this.zoomBody.style["-transform-origin"]="0px 0px"},destroy:function(){this.removeMouseListeners(),this.removeTouchListeners(),this.zoomViewer.removeEventListener("touchstart",this.touchStart,!1),this.options.withMouse&&this.zoomViewer.removeEventListener("mousedown",this.mouseDown,!1),this.zoomBody.removeAttribute("style"),this.zoomViewer=null,this.zoomBody=null},redefineOptions:function(t){var o=this;this.removeMouseListeners(),this.removeTouchListeners(),this.zoomViewer.removeEventListener("touchstart",this.touchStart,!1),this.zoomViewer.removeEventListener("mousedown",this.mouseDown,!1),this.zoomBody.removeAttribute("style");for(var s in t)t.hasOwnProperty(s)&&(this.options[s]=t[s]);this.options.maxZoom=this.options.maxZoom||2,this.options.minZoom=this.options.minZoom||1,this.options.withMouse&&(this.mouseDown=function(t){t.stopPropagation(),o._mouseZoomStart(t)},this.zoomViewer.addEventListener("mousedown",this.mouseDown,!1)),this.addTouchListeners(),this.addStyles()},_mouseZoomStart:function(t){if(t.target!==this.zoomViewer){t.preventDefault();var o=this.zoomBody.getBoundingClientRect();this.zoomViewer.style.overflow="hidden",this.startLeft=-o.left,this.startTop=-o.top,this.averX=t.pageX,this.averY=t.pageY,this.transform(0,0,this.scale),this.distance=1,this.startScale=this.scale,this.pinching=!0,this.addMouseListeners()}},_mouseZoom:function(t){if(!(!this.pinching||this.scale<=this.options.minZoom&&t.wheelDelta>0||this.scale>=this.options.maxZoom&&t.wheelDelta<0)){this.distance=this.distance+(t.wheelDelta>0?.01:-.01);var o,s=1/this.distance*this.startScale;(this.scaled||s)&&(this.scaled=!0,o=this.calculateShifts(s/this.startScale),this.transform(o.shiftX,o.shiftY,s),this.scale=s)}},_mouseMove:function(t){var o;this.averX=t.pageX,this.averY=t.pageY,o=this.calculateShifts(this.scale/this.startScale),this.transform(o.shiftX,o.shiftY,this.scale)},_mouseZoomEnd:function(t){var o,s=this.zoomViewer;this.scale>this.options.maxZoom?this.scale=this.options.maxZoom:this.scale<this.options.minZoom&&(this.scale=this.options.minZoom),this.zoomViewer.style.overflow="auto",o=this.calculateShifts(this.scale/this.startScale),this.transform(0,0,this.scale),s.scrollLeft=this.startLeft-o.shiftX- -this.viewerOffsets.left,s.scrollTop=this.startTop-o.shiftY- -this.viewerOffsets.top,this.pinching=!1,this.scaled=!1,this.averX=0,this.averY=0,this.removeMouseListeners()},_touchZoomStart:function(t){if(t.touches&&!(t.touches.length<2)){var o={x1:t.touches[0].pageX,x2:t.touches[1].pageX,y1:t.touches[0].pageY,y2:t.touches[1].pageY},s=this.calculateDelta(o),e=this.calculateDistance({x:s.x,y:s.y}),i=this.zoomBody.getBoundingClientRect();this.zoomViewer.style.overflow="hidden",this.startLeft=-i.left,this.startTop=-i.top,this.calculateAveragePoint(o),this.transform(0,0,this.scale),this.distanceStart=e,this.startScale=this.scale,this.pinching=!0,this.addTouchListeners()}},_touchZoom:function(t){if(t.touches&&!(t.touches.length<2)&&this.pinching){var o,s={x1:t.touches[0].pageX,x2:t.touches[1].pageX,y1:t.touches[0].pageY,y2:t.touches[1].pageY},e=this.calculateDelta(s),i=this.calculateDistance({x:e.x,y:e.y}),h=1/this.distanceStart*i*this.startScale;(this.scaled||h&&!(Math.abs(this.distanceStart-i)<10))&&(this.scaled=!0,this.options.withMoving&&this.calculateAveragePoint(s),h<this.options.minZoom?h=this.options.preventBounce?this.options.minZoom:.5*this.options.minZoom*Math.pow(2,h/this.options.minZoom):h>this.options.maxZoom&&(h=this.options.preventBounce?this.options.maxZoom:2*this.options.maxZoom*Math.pow(.5,this.options.maxZoom/h)),o=this.calculateShifts(h/this.startScale),this.transform(o.shiftX,o.shiftY,h),this.scale=h)}},_touchZoomEnd:function(t){if(t.touches&&!(t.touches.length>=2)&&this.pinching){var o,s=this.zoomViewer;this.scale>this.options.maxZoom?this.scale=this.options.maxZoom:this.scale<this.options.minZoom&&(this.scale=this.options.minZoom),this.zoomViewer.style.overflow="auto",o=this.calculateShifts(this.scale/this.startScale),this.transform(0,0,this.scale),s.style.display="none",s.offsetHeight,s.style.display="block",s.scrollLeft=this.startLeft-o.shiftX- -this.viewerOffsets.left,s.scrollTop=this.startTop-o.shiftY- -this.viewerOffsets.top,this.pinching=!1,this.scaled=!1,this.averX=0,this.averY=0,this.removeTouchListeners()}},calculateShifts:function(t){var o={};return o.shiftX=this.averX-this.averX*t+(this.startLeft-this.startLeft*t),o.shiftY=this.averY-this.averY*t+(this.startTop-this.startTop*t),o},calculateDistance:function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))},calculateDelta:function(t){return{x:Math.abs(t.x1-t.x2),y:Math.abs(t.y1-t.y2)}},calculateAveragePoint:function(t){this.averX=(t.x1+t.x2)/2,this.averY=(t.y1+t.y2)/2},transform:function(t,o,s){this.zoomBody.style.transform="translate("+t+"px, "+o+"px)scale("+s+") translateZ(0)",this.zoomBody.style["-webkit-transform"]="translate("+t+"px, "+o+"px)scale("+s+") translateZ(0)"},addMouseListeners:function(){for(var t in this._mouseEvent)this._mouseEvent.hasOwnProperty(t)&&this.zoomViewer.addEventListener(t,this[this._mouseEvent[t]],!1);this.options.withMoving&&this.zoomViewer.addEventListener("mousemove",this.mouseMove,!1)},removeMouseListeners:function(){for(var t in this._mouseEvent)this._mouseEvent.hasOwnProperty(t)&&this.zoomViewer.removeEventListener(t,this[this._mouseEvent[t]],!1);this.options.withMoving&&this.zoomViewer.removeEventListener("mousemove",this.mouseMove,!1)},addTouchListeners:function(){for(var t in this._touchEvent)this._touchEvent.hasOwnProperty(t)&&this.zoomViewer.addEventListener(t,this[this._touchEvent[t]],!1)},removeTouchListeners:function(){for(var t in this._touchEvent)this._touchEvent.hasOwnProperty(t)&&this.zoomViewer.removeEventListener(t,this[this._touchEvent[t]],!1)}},t});
//# sourceMappingURL=zoom.min.js.map